<ion-header class="ion-no-border" mode="md">
  <ion-toolbar class="text-tolbar">
    <ion-buttons (click)="closeModalWithoutThem()" slot="start">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="20"
        viewBox="0 0 24 20"
        fill="none"
      >
        <path
          d="M24 9.99917C24 10.5088 23.5864 10.9223 23.0768 10.9223H3.14982L10.1905 17.9631C10.5512 18.3237 10.5512 18.9084 10.1905 19.2691C10.0108 19.4488 9.77445 19.5399 9.53812 19.5399C9.30179 19.5399 9.06542 19.45 8.88571 19.2691L0.269401 10.6528C0.184469 10.5679 0.116936 10.4658 0.0701613 10.3526C-0.0233871 10.1273 -0.0233871 9.87252 0.0701613 9.64727C0.116936 9.53403 0.184469 9.43169 0.269401 9.34676L8.88571 0.730451C9.24636 0.369797 9.83108 0.369797 10.1917 0.730451C10.5524 1.09111 10.5524 1.67583 10.1917 2.03648L3.15102 9.0772H23.0768C23.5864 9.07596 24 9.48958 24 9.99917Z"
          fill="#111C3C"
        />
      </svg>
    </ion-buttons>

    <ion-title style="text-align: center">Notifications</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  @if(notifications()) { @if(notifications().today.length ||
  notifications().this_week.length || notifications().this_month.length) {
  <ion-list lines="none" *ngIf="today().length">
    <ion-list-header>
      <ion-label>Today</ion-label>
    </ion-list-header>
    @for (notification of today(); track $index) {
    <app-notification-item
      [notification]="notification"
      (onDeleteNotification)="deleteNotification($event)"
      (onShowActionSheet)="showActionSheet($event)"
      (onProfileSelect)="showProfile($event)"
      (onPostSelect)="getPost($event)"
    ></app-notification-item>
    }
  </ion-list>

  <ion-list lines="none" *ngIf="this_week().length">
    <ion-list-header>
      <ion-label>Week Ago</ion-label>
    </ion-list-header>

    @for (notification of this_week(); track $index) {
    <app-notification-item
      [notification]="notification"
      (onDeleteNotification)="deleteNotification($event)"
      (onShowActionSheet)="showActionSheet($event)"
      (onProfileSelect)="showProfile($event)"
      (onPostSelect)="getPost($event)"
    ></app-notification-item>
    }
  </ion-list>

  <ion-list lines="none" *ngIf="this_month().length">
    <ion-list-header>
      <ion-label>Month Ago</ion-label>
    </ion-list-header>
    @for (notification of this_month(); track $index) {
    <app-notification-item
      [notification]="notification"
      (onDeleteNotification)="deleteNotification($event)"
      (onShowActionSheet)="showActionSheet($event)"
      (onProfileSelect)="showProfile($event)"
      (onPostSelect)="getPost($event)"
    ></app-notification-item>
    }
  </ion-list>
  } @else {
  <ion-list lines="none" style="height: 70vh">
    <ion-list-header>
      <ion-label>No notifications</ion-label>
    </ion-list-header>
    <div class="empty-notification">
      <svg viewBox="0 0 512 512">
        <path
          fill="none"
          stroke="currentColor"
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="32"
          d="M128.51 204.59q-.37 6.15-.37 12.76C128.14 304 110 320 84.33 351.43C73.69 364.45 83 384 101.62 384H320m94.5-48.7c-18.48-23.45-30.62-47.05-30.62-118c0-79.3-40.52-107.57-73.88-121.3c-4.43-1.82-8.6-6-9.95-10.55C294.21 65.54 277.82 48 256 48s-38.2 17.55-44 37.47c-1.35 4.6-5.52 8.71-10 10.53a150 150 0 0 0-18 8.79M320 384v16a64 64 0 0 1-128 0v-16"
        />
        <path
          fill="none"
          stroke="currentColor"
          stroke-linecap="round"
          stroke-miterlimit="10"
          stroke-width="32"
          d="M448 448L64 64"
        />
      </svg>
      <p>You have no notifications</p>
    </div>
  </ion-list>
  } } @else {
  <ul class="skeleton-list">
    @for (el of loaderArray; track el) {
    <li class="notification-container">
      <div class="rhombus-avatar">
        <ion-skeleton-text
          animated
          style="width: 100%; height: 100%; border-radius: 5px"
        ></ion-skeleton-text>
      </div>
      <div class="notification-text">
        <div>
          <ion-skeleton-text
            animated
            style="width: 100%; --border-radius: 9999px"
          ></ion-skeleton-text>
        </div>

        <div>
          <ion-skeleton-text
            animated
            style="width: 60%; --border-radius: 9999px"
          ></ion-skeleton-text>
        </div>

        <div>
          <ion-skeleton-text
            animated
            style="width: 20%; --border-radius: 9999px; margin-top: 8px"
          ></ion-skeleton-text>
        </div>
      </div>
      <div
        class="notification-image"
        [style.opacity]="el % 3 === 0 ? '0' : '1'"
      >
        <ion-skeleton-text
          animated
          style="width: 100%; height: 100%"
        ></ion-skeleton-text>
      </div>
    </li>
    }
  </ul>

  }
</ion-content>

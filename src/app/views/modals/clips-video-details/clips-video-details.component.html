<div class="main-container" style="height: 100%; width: 100%">
  <div
    class="blur-container"
    [ngStyle]="{
      'background-image': 'url(' + thumbnail() + ')',
      'background-position': 'center',
      'background-repeat': 'no-repeat',
      'background-size': 'contain'
    }"
  >
    <div class="background"></div>
  </div>

  <div class="main-content">
    <ion-header class="ion-no-border" mode="md">
      <ion-toolbar
        class="header-toolbar"
        style="padding-top: 0px; padding: 0px 16px"
      >
        <ion-buttons (click)="closeModalWithoutThem()" slot="start">
          <ion-icon
            style="font-size: 24px; color: white"
            name="close-outline"
          ></ion-icon>
        </ion-buttons>
        <ion-buttons slot="end">
          <ion-button
            (click)="postPick()"
            style="
              background-color: #3409b7;
              color: white;
              border-radius: 5px;
              height: 28px !important;
              padding: 0px 16px 4px 16px;
              font-size: 14px;
            "
            [disabled]="isPosting()"
          >
            Post
          </ion-button>
        </ion-buttons>
        <ion-title class="title-text"> Add Options </ion-title>
      </ion-toolbar>
    </ion-header>

    <ion-content>
      <ion-card
        class="ion-padding-horizontal"
        style="
          margin-bottom: 0;
          padding-bottom: 5px;
          height: 40%;
          box-shadow: none;
          --background: transparent;
        "
      >
        <div
          style="
            height: calc(100% - 45px);
            display: flex;
            flex-direction: column;
            justify-content: space-between;
          "
        >
          <ion-textarea
            style="height: 100%"
            class="text-choix min-height"
            [(ngModel)]="text_content"
            placeholder="Asking the community today?"
          ></ion-textarea>
          <div
            style="
              justify-content: space-between;
              display: flex;
              align-items: center;
            "
          >
            <div>
              <ion-chip
                (click)="changePublic()"
                style="
                  margin-left: 0px;
                  color: #111c3c;
                  background: var(--Light-grey, #f6f7fb);
                "
              >
                <svg
                  *ngIf="public == 'public'"
                  xmlns="http://www.w3.org/2000/svg"
                  width="12"
                  height="12"
                  viewBox="0 0 12 12"
                >
                  <path
                    id="Icon_ionic-md-globe"
                    data-name="Icon ionic-md-globe"
                    d="M9.375,3.375a6,6,0,1,0,6,6A6,6,0,0,0,9.375,3.375ZM8.753,14.481A5.143,5.143,0,0,1,5.461,6.039a5.7,5.7,0,0,1,.058.7,2.224,2.224,0,0,0,.287,1.7,2.8,2.8,0,0,1,.271.81c.075.255.372.389.577.547.414.318.81.687,1.25.966.29.184.471.276.386.63a2.235,2.235,0,0,1-.235.713,1.446,1.446,0,0,0,.241.646c.216.216.431.415.667.609C9.329,13.654,8.928,14.047,8.753,14.481Zm4.258-1.469a5.106,5.106,0,0,1-2.67,1.416,2.133,2.133,0,0,1,.632-.847,2.149,2.149,0,0,0,.568-.7,4.88,4.88,0,0,1,.392-.67c.2-.314-.5-.789-.731-.888a7.539,7.539,0,0,1-1.36-.847c-.326-.229-.988.12-1.356-.041A7.1,7.1,0,0,1,7.127,9.5c-.452-.341-.43-.738-.43-1.24.354.013.858-.1,1.094.187.074.09.329.492.5.349.14-.117-.1-.584-.15-.694-.144-.338.329-.47.571-.7.316-.3.994-.768.941-.982S8.973,5.6,8.606,5.693c-.055.014-.539.522-.633.6q0-.249.008-.5c0-.1-.2-.212-.186-.28.023-.171.5-.48.616-.616-.083-.052-.365-.294-.451-.259-.207.086-.441.146-.648.232a1.317,1.317,0,0,0-.019-.206A5.094,5.094,0,0,1,8.6,4.29l.406.163.287.34.286.3.25.081.4-.375-.1-.268V4.286a5.087,5.087,0,0,1,2.179.86c-.116.01-.244.028-.388.046a1.293,1.293,0,0,0-.2-.076c.188.405.385.8.585,1.2.213.427.686.885.769,1.336.1.531.03,1.014.084,1.639a2.8,2.8,0,0,0,.679,1.286,1.359,1.359,0,0,0,.53.064A5.111,5.111,0,0,1,13.012,13.012Z"
                    transform="translate(-3.375 -3.375)"
                    fill="#111c3c"
                  />
                </svg>

                <svg
                  *ngIf="public == 'friends'"
                  width="18"
                  height="18"
                  xmlns="http://www.w3.org/2000/svg"
                  viewBox="0 0 640 512"
                >
                  <path
                    d="M192 256c61.9 0 112-50.1 112-112S253.9 32 192 32 80 82.1 80 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C51.6 288 0 339.6 0 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zM480 256c53 0 96-43 96-96s-43-96-96-96-96 43-96 96 43 96 96 96zm48 32h-3.8c-13.9 4.8-28.6 8-44.2 8s-30.3-3.2-44.2-8H432c-20.4 0-39.2 5.9-55.7 15.4 24.4 26.3 39.7 61.2 39.7 99.8v38.4c0 2.2-.5 4.3-.6 6.4H592c26.5 0 48-21.5 48-48 0-61.9-50.1-112-112-112z"
                  />
                </svg>

                <ion-label
                  style="
                    padding: 0px 4px;
                    font-family: SofiaProMedium;
                    font-size: 14px;
                    font-weight: 500;
                    text-transform: capitalize;
                  "
                  >{{ this.public }}</ion-label
                >
              </ion-chip>
            </div>
          </div>
        </div>

        <ion-segment
          scrollable
          class="segments"
          #segment
          style="display: flex; gap: 8px"
        >
          <ion-segment-button
            (click)="choiceTheme()"
            style="width: fit-content"
            class="ion-no-padding border-right segment-option theme"
          >
            <ion-chip>
              <ion-label>{{ theme ? theme.name : "Theme" }}</ion-label>
            </ion-chip>
          </ion-segment-button>
          <ion-segment-button
            (click)="choiceLocation()"
            style="width: fit-content"
            class="ion-no-padding border-right segment-option"
          >
            <ion-chip color="medium">
              <ion-label style="display: flex">
                <ion-icon name="location" ion-chip-start></ion-icon>
                <ion-label style="padding-left: 4px">{{
                  location && location.text ? location.text : "Location"
                }}</ion-label>
              </ion-label>
            </ion-chip>
          </ion-segment-button>

          <ion-segment-button
            (click)="chooseUser()"
            style="width: fit-content"
            class="ion-no-padding border-right segment-option"
          >
            <ion-chip color="medium">
              <ion-label style="display: flex">
                <ion-icon name="person" ion-chip-start></ion-icon>
                <ion-label style="padding-left: 4px"> Tag </ion-label>
              </ion-label>
            </ion-chip>
          </ion-segment-button>

          <ion-segment-button
            *ngFor="let tag of tags"
            (click)="deleteItem(tag)"
            style="width: fit-content"
            class="ion-no-padding border-right"
          >
            <ion-chip color="medium" style="font-size: 14px">
              <ion-label style="display: flex; align-items: center">
                <app-avatar
                  *ngIf="tag"
                  [src]="tag.avatar.url"
                  width="18px"
                  height="18px"
                  size="18px"
                ></app-avatar>

                <ion-label style="padding-left: 4px; padding-right: 5px">
                  {{ tag.full_name }}
                </ion-label>

                <ion-icon
                  name="close-outline"
                  style="font-size: 1.2rem"
                  color="danger"
                ></ion-icon>
              </ion-label>
            </ion-chip>
          </ion-segment-button>

          <ion-segment-button
            style="width: fit-content"
            class="ion-no-padding border-right segment-option"
            (click)="colorPicker.click()"
          >
            <ion-chip *ngIf="selectedType() === 'txt'" style="font-size: 14px">
              <ion-label style="display: flex; align-items: center">
                <ion-icon name="color-fill"></ion-icon>
                <ion-label style="padding-left: 4px"> Aa </ion-label>
              </ion-label>
            </ion-chip>
            <input
              style="display: none"
              [(ngModel)]="colorpicked"
              type="color"
              id="color"
              #colorPicker
              name="color"
            />
          </ion-segment-button>
        </ion-segment>
      </ion-card>

      <ion-card
        #contentElement
        style="
          min-height: 60%;
          margin-top: 0;
          margin-bottom: 0;
          padding-bottom: 5rem;
          display: flex;
          --background: none;
        "
      >
        <div class="ion-padding content-manager" [ngSwitch]="selectedType()">
          <ng-container *ngSwitchCase="'img'">
            <ion-grid>
              <ion-row *ngFor="let row of [0, 1]">
                <ion-col *ngFor="let col of [0, 1]">
                  <app-choice-image
                    [image]="imageData[row * 2 + col].image"
                    [index]="row * 2 + col + 1"
                    (takePicture)="takePicture(row * 2 + col)"
                    (editImage)="
                      openModalPintura(
                        imageData[row * 2 + col].image,
                        'img' + (row * 2 + col + 1)
                      )
                    "
                    (resetImage)="resetImage(row * 2 + col)"
                  ></app-choice-image>
                </ion-col>
              </ion-row>
            </ion-grid>
          </ng-container>
          <ng-container *ngSwitchCase="'txt'">
            <div class="choice-question-container">
              <app-choice-question
                *ngFor="let data of imageData; let i = index"
                [content]="data.content"
                [color]="colorpicked"
                [index]="i + 1"
                (insertText)="openActionSheet(i + 1)"
                (editText)="openActionSheet(i + 1, data.content)"
                (resetText)="resetContent(i)"
              ></app-choice-question>
            </div>
          </ng-container>
          <ng-container *ngSwitchCase="'saved'"></ng-container>
          <ng-container *ngSwitchDefault>
            <button class="choice-btn" (click)="choiceImg('img')">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="40"
                height="40"
                viewBox="0 0 40 40"
              >
                <g
                  id="Icon_ionic-md-photos"
                  data-name="Icon ionic-md-photos"
                  transform="translate(10.132 -2.635)"
                >
                  <path
                    id="Tracé_23"
                    data-name="Tracé 23"
                    d="M36.19,36.7V11.855a3.99,3.99,0,0,0-3.981-3.98H7.356a3.99,3.99,0,0,0-3.981,3.98V36.711a3.99,3.99,0,0,0,3.981,3.98H32.219A4,4,0,0,0,36.19,36.7ZM13.564,25.769l4.223,5.965,6.218-8.947,8.2,11.929H7.356Z"
                    transform="translate(-13.507 1.945)"
                    fill="#fff"
                  />
                  <path
                    id="Tracé_24"
                    data-name="Tracé 24"
                    d="M38.679,3.375H12.128A4.247,4.247,0,0,0,7.875,7.6v.524H33.9a4.247,4.247,0,0,1,4.253,4.22V38.166h.528a4.247,4.247,0,0,0,4.253-4.22V7.6A4.247,4.247,0,0,0,38.679,3.375Z"
                    transform="translate(-13.063 -0.74)"
                    fill="#fff"
                  />
                </g>
              </svg>
              Photo
            </button>
            <button class="choice-btn" (click)="choiceImg('txt')">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="40"
                height="40"
                viewBox="0 0 40 40"
              >
                <path
                  id="Icon_awesome-question-circle"
                  data-name="Icon awesome-question-circle"
                  d="M40.563,20.563a20,20,0,1,1-20-20A20,20,0,0,1,40.563,20.563ZM21.1,7.175a10.446,10.446,0,0,0-9.4,5.142.969.969,0,0,0,.219,1.311l2.8,2.122a.967.967,0,0,0,1.344-.171c1.441-1.827,2.428-2.887,4.621-2.887,1.648,0,3.685,1.06,3.685,2.658,0,1.208-1,1.828-2.624,2.74-1.9,1.063-4.407,2.387-4.407,5.7v.323a.968.968,0,0,0,.968.968h4.516a.968.968,0,0,0,.968-.968V24c0-2.3,6.709-2.391,6.709-8.6C30.5,10.724,25.645,7.175,21.1,7.175Zm-.537,20a3.71,3.71,0,1,0,3.71,3.71A3.714,3.714,0,0,0,20.563,27.175Z"
                  transform="translate(-0.563 -0.563)"
                  fill="#fff"
                />
              </svg>
              Choices
            </button>
          </ng-container>
        </div>
      </ion-card>
    </ion-content>
  </div>
</div>
